<ion-view>
	<ion-content >
	<div class="login-container">
	<div ng-show="signup==false">
		<div class="text-center">
			<img src="img/pompipi.png" />
	</div>
			<form name="LoginForm" novalidate>
				<label class="item item-input">
			<i class="icon ion-person placeholder-icon"></i>
			<input type="text" ng-model="user.username" name="username" ng-pattern="/^[a-zA-Z0-9_\-^/S]*$/" placeholder="Your username" required>
		</label>
			<p style="color:orange" ng-show="LoginForm.username.$error.pattern">Only letters, numbers and underscores allowed. No spaces or other characters.</p>
			<label class="item item-input">
			
			<i class="icon ion-locked placeholder-icon"></i>
			<input type="password" ng-model="user.password" name="password" ng-pattern="/^[a-zA-z0-9_!$@/S]*$/" placeholder="Your password" required>
		</label>
			<p style="color:orange" ng-show="LoginForm.password.$error.pattern">Only letters, numbers and underscores allowed. No spaces or other characters.</p></p> 
			
			<button class="button button-positive button-block" ng-click="normalLogin()" ng-disabled="LoginForm.$invalid">Login </button>
			<button class="button button-positive button-block" ng-click="facebookSignIn()">Login with Facebook</button>
			</form>
			<p>Don't have an account?</p>
			 <button class="button button-calm button-block" ng-click="showSignUp()">Sign Up.</button>

		
	</div>
	<div  ng-show="signup==true" >
		<div class="text-center">
			<img src="img/pompipi.png" />
	</div>
		<h3 style="font-family:Helvetica;color:white;font-weight:100;text-align:center">Sign Up</h3>
		<form name="signUpForm" novalidate>
					
					<div class="cropArea">
					<img-crop image="selectedImage"                 
					result-image="croppedDataUrl" >
					</img-crop>
					</div>
					<button class="button button-dark button-block"  ng-click="setAvatar()">
					Select Picture</button>
					<div class="text-center">
					<h3 style="font-family:Helvetica;color:white;font-weight:100;text-align:center">Your Avatar</h3>
  <img style="border-radius:50%;background-color:gray;border:5px solid rgba(255,255,255,0.5)" ng-src="{{croppedDataUrl}}" />
 </div>
				
		<label class="item item-input"><i class="icon ion-email"></i>
			<input type="text" ng-model="user.email" placeholder="Your email" name="email" ng-pattern="/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i" ng-focus="resetEmailandUsername()" ng-blur="checkEmailExists()" required>
			
			<p style="color:orange" ng-show="signUpForm.email.$error.pattern">Email is invalid</p>
			<p style="color:orange" ng-show="emailExists==true">Email already exists. Try logging in or use another email.</p>
			</label>
		<label class="item item-input"><i class="icon ion-person"></i>
			<input type="text" ng-model="user.firstname" placeholder="Your first name" name="firstname" ng-pattern="/^[a-zA-Z_\-^/S]*$/" required>

			<p style="color:orange" ng-show="signUpForm.firstname.$error.pattern">Only letters, numbers and underscores allowed. No spaces or other characters.</p>
		</label>
			<label class="item item-input"><i class="icon ion-person"></i>
			<input type="text" ng-model="user.lastname" placeholder="Your last name" name="lastname" ng-pattern="/^[a-zA-Z_\-^/S]*$/" required>

			<p style="color:orange" ng-show="signUpForm.lastname.$error.pattern">Only letters, numbers and underscores allowed. No spaces or other characters.</p>
		</label>
			<label class="item item-input"><i class="icon ion-person"></i>

			
			<input type="text" ng-model="user.new_username" placeholder="Your username" name="username" ng-pattern="/^[a-zA-Z0-9_\-^/S]*$/" ng-minlength="5" ng-maxlength="25" ng-blur="checkUsernameExists()" ng-focus="resetEmailandUsername()" required>

			<p style="color:orange" ng-show="signUpForm.username.$error.pattern ">Only letters, numbers and underscores allowed. No spaces or other characters.</p>
			<p style="color:orange" ng-show="usernameExists==true">username already exists. Try logging in or select another username.</p>
		</label>
			<label class="item item-input"><i class="icon ion-locked"></i>
			<input type="password" ng-model="user.new_password" placeholder="Your password" name="password1" ng-pattern="/^[a-zA-z0-9_!$@/S]*$/" required> 
			<p style="color:orange" ng-show="signUpForm.password1.$error.pattern">Only letters, numbers and underscores allowed. No spaces or other characters.</p>
		</label>
			<label class="item item-input"><i class="icon ion-locked"></i>
			<input type="password" ng-model="user.password2" compare-to="user.password" placeholder="Confirm password" name="password2" ng-pattern="/^[a-zA-z0-9_!$@/S]*$/" required>
			<p style="color:orange" ng-show="signUpForm.password2.$error.pattern">Only letters, numbers and underscores allowed. No spaces or other characters.</p>
			<p ng-show="signUpForm.password2.$error.pattern">Only letters, numbers and underscores allowed. No spaces or other characters.</p>
			<p style="color:orange" ng-show="signUpForm.password2.$dirty && signUpForm.password2.$error.compareTo">Passwords must match.</p>
			</label>
			<button class="button button-calm button-block" ng-click="normalSignUp()" ng-disabled="signUpForm.$invalid"> Sign Up </button>
			<p>Already have an account? </p>
			<button class="button button-positive button-block" ng-click="showSignUp()">Log in.</button>
			</form>
	</div>
	
	</ion-content>
</ion-view>